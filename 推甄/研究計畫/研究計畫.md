# 碩士學程研究計畫

## 摘要

從**拜占庭問題** [1]到中本聰所提出的**比特幣白皮書** [2]，世人開始對這個奇妙的分散式系統架構有了新的認知並將其統稱為**區塊鏈**。在比特幣 [3]中的創世區塊誕生至今的 10 餘年間，從早期用於**暗網** [4]交易進而引起挖礦風潮，再到區塊鏈技術的開枝散葉，如: 以太坊 [5]、狗狗幣 [6]、波場幣 [7]以及在台灣發跡並快速崛起的新創公司: 圖靈鏈 [8]...等。大家都試著利用分布式帳本嘗試解決不同問題。

像是圖靈鏈執行長最初是希望能夠利用數位證書去解決申請海外研究所時遇到: 履歷認證過於耗時的問題。而以太坊創辦人一開始是希望比特幣能夠發展出完整的程式語言以供開發者使用，遭到拒絕後才將方向轉為打造自己的區塊鏈。這些區塊鏈的前輩之所以能獲得成功，皆是出於其擁有**解決問題**的強烈動機。

在台灣土生土長的我，享受民主帶來的便利。也因為民主賦予人民的權利，各位國民都有義務參與選舉等公眾事務。在 2018 年的 9 合 1 市長選舉，因為與公投合並舉辦，導致**一邊開票，一邊投票**的亂象發生。透過該事件，便讓我開始思考: 要如何利用資訊技術降低公眾投票所需要的人力以及時間成本。一開始，我對於如何找出問題的答案並沒有具體的想法，直到在實驗室參與區塊鏈技術的相關研究時，我才驚覺: 或許這就是該問題的最佳解答。

在我的碩士論文中，我希望從**投票活動的資訊化**作為出發點，設計出完整的身份驗證機制，從遠而近的將投票活動資訊化、數位身份證、戶政資料登記的詳細流程設計出來。熱衷於實作的我，更希望自己能在碩士研讀期間實作出完整的系統原型。

## 系統架構與動機

以 2018 年的 9 合 1 市長選舉為例，因為與公投議題較往年更為特別並且在公投書的設計上有不易閱讀等疏失，進而導致**一邊開票，一邊投票**的亂象發生。起初，我雖希望能夠**利用資訊技術降低公眾投票所需要的人力以及時間成本**，不過在當時並沒有太具體的實現方式。直到在實驗室參與區塊鏈技術的相關研究並學習使用 `Hyperledger - fabric` 配合網頁開發技術實現研究原型時，我才驚覺: 或許區塊鏈能夠有效解決這個問題。也因為投稿過科技部大專生研究計畫，讓我對於方向探索更有心得，確立初步方向後，我也開始閱讀相關的技術文獻，包含:

- 比特幣白皮書
- Using blockchain for enabling internet voting
- BLOCKCHAIN FOR THE HUMANITARIAN SECTOR: FUTURE OPPORTUNITIES
- Medical Record System Using Blockchain, Big Data and Tokenization

在閱讀相關文獻後發現在學術界中已經有人嘗試利用區塊鏈技術解決公民投票的問題。不過，我也發現該研究並沒有對如何落實政策以及實際應用產生的問題進行更深的探討。

<?-- 塞個架構圖 QQ --?>

因此，在我的碩士論文中，我希望從**投票活動的資訊化**作為出發點，設計出完整的身份驗證機制，從遠而近的將投票活動資訊化、數位身份證、戶政資料登記的詳細流程設計出來。此外，熱衷於實作的我，期望自己能在碩士研讀期間實作出完整的系統原型。

整個資訊系統共包含了:

- 區塊鏈主網路

  可以考慮使用由 `Linux Foundation` [8]所主導的 `Hyperledger-fabric` [9]作為區塊鏈網路主體或是自行設計一套簡易的區塊鏈網路。

- 節點

  本機制以地方戶政機關作為節點，這樣一來，能夠採用較為節省效能的權威證明共識機制 (Proof-of-Authority, PoA) [10]以及控制節點數量。

- 註冊與註銷身份

  若以 `Hyperledger-fabric` 作為區塊鏈主網路，便可以藉由其官方提供的 SDK [11]開發出註冊與註銷身份的資訊系統供醫院以及有關單位使用。
  
## 初步構思

<img width=500 src="https://i.imgur.com/Mmmihd6.png"></img>

#### 圖一、 身份註冊流程圖

- 身份註冊、身份驗證機制
    送出身份註冊請求後，系統會使用 SHA256 [12]加密演算法以獲取公私鑰並且將個人資訊使用公鑰加密，再將加密內容以及公鑰作為交易內容提交出去。
    
    交易內容如下:
    ```
    Key: transaction_id,
    Value: {
        hashWithPublicKey(personalInformation),
        publicKey
    }
    ```
    
    當交易請求驗證成功並儲存至帳本 (在 Hyperledger-Fabric 中，官方偏好以帳本作為區塊鏈的代稱)後，會回傳交易序號以及個人私鑰給申請人。
    並且，我們以該交易序號作為個人的身份序號 (若是用於取代現有的身份系統，該交易序號可視為身份證字號)。
    利用該機制，能讓身份序號完全公開，因為帳本上的個人隱私資訊僅能使用個人持有的私鑰解密。

<img width=500 src="https://github.com/ianchen0119/ianchen0119/blob/master/%E6%8E%A8%E7%94%84/%E7%A0%94%E7%A9%B6%E8%A8%88%E7%95%AB/process.png?raw=true"></img>

#### 圖二、 實際應用情境圖

- 實際應用時可能發生的情況
  - Case A: 出生
    1. 由醫院、婦產科利用身份註冊系統發起身份登記請求 (交易請求)。
    2. 交易會被提交到可靠節點 (地方戶政機關)進行驗證。
    3. 經過節點驗證以後會返回交易編號給發起交易的機構，並且將交易資訊新增到帳本中。
    
  - Case B: 死亡
    1. 由相關單位發起註銷身份請求 (交易請求)。
    2. 交易會被提交到可靠節點 (地方戶政機關)進行驗證。
    3. 經過節點驗證以後會返回交易編號給發起交易的機構，並且將交易資訊新增到帳本中。
    
  - Case C: 政策推出前出生的國民

    回到現實層面，要將國內人口全數換發成數位化身份登記是非常困難的，因此本研究將政策落實分為兩階段:

    ### 輔導階段 ~ ??年

    可根據戶政機關既有的資料庫，額外新增一筆紀錄有無登記新數位身份的欄位，並且透過需要實名制度的活動將尚未登記的國民納入管理，舉例:

    - 進入小學階段前:
      - 就醫時透過健保系統進行驗證並協助身份登記。
      - 國民小學入學時，透過學校統一進行身份登記。
    - 小學、國高中、五專二技及大專院校就讀中
      - 就醫時透過健保系統進行驗證並協助身份登記。
      - 透過學校統一進行身份登記。
      - 符合參與選舉、公投身份者，在進行投票前協助身份登記。
    - 就業國民
      - 申報所得稅時，協助進行身份登記。
      - 透過勞保系統，要求資方協助勞方登記。
      - 就醫時透過健保系統進行驗證並協助身份登記。
      - 符合參與選舉、公投身份者，在進行投票前協助身份登記。
    - 待業、退休國民
      - 就醫時透過健保系統進行驗證並協助身份登記。
      - 領取退休金、失業給付等相關社福措施時協助身份登記。
      - 符合參與選舉、公投身份者，在進行投票前協助身份登記。

    ### 強制落實階段

    - 過戶政資訊系統查詢尚未登記人口並實行強制登記輔導。
    - 將**輔導階段**小節提到的方法，全面轉為強制登記。

  - Case D: 交易驗證並提交至帳本
    若採用 Hyperledger-Fabric 開發，交易流程如下:
    1. 用戶透過 Application 向 Peer 發出請求。
    2. Peer 收到請求後，會檢查資料的正確性並且依據設定尋找其他節點背書。
    3. 待指定節點背書後，智能合約會依據下列事項逐一進行驗證:
        - 背書是否有效。
        - 背書數量是否正確。
        - 背書是否來自預期節點。

    4. 驗證完成後資料會被記錄到帳本上並且將交易序號傳回給發出請求的用戶。
- 投票活動資訊化
    假設 2024 總統大選是利用該機制進行投票並且假設本機制採用利用 Hyperledger-Fabric 開發。便可以利用 Hyperledger-Fabric 中帳本資料可修改的特性 (有開啟該功能的前提下)，在每個用戶的專屬區塊內新增一筆欄位 `vote` :
    
    ```
    Key: transaction_id,
    Value: {
        hashWithPublicKey(personalInformation),
        publicKey,
        vote:[] //new
    }
    ```
    當票選進行時，投票人可依據政府機關發布的應用程序進行投票，投票流程如下:
    - 用戶透過 Application 向 Peer 送出交易請求，交易內容為:
      
        ```
        userId: 'XXX',
        decision: 'XXX'
        ```
    - Peer 收到請求後，會以 userId 作為關鍵字查詢帳本，檢查該用戶是否已經進行此次投票。
    - 若用戶已經投票，則回傳錯誤訊息。否則，系統會產生亂碼並使用用戶的公鑰進行加密作為檢查碼傳回 application ，這時用戶會收到輸入驗證碼的請求，要獲取驗證碼必須將檢查碼使用私鑰解密。
    - 待用戶輸入正確的驗證碼，基於保密原則， Peer 會將投票結果以用戶公鑰進行加密並儲存至帳本:
      
    ```
    Key: transaction_id,
    Value: {
        hashWithPublicKey(personalInformation),
        publicKey,
        vote:[ 
            {
                "2024presidentialElection": hashWithPublicKey(decision)
            }
        ]
    }
    ```
    同時，第三方 (投票舉辦方，在此為政府)會收到 Peer 發出的請求，以不記名的方式記錄投票候選人獲得此票。
    
    - 待開票時間到，只需查看第三方資料庫的資訊便能完成計票流程。
- 可延伸的方向
    1. 搭配電子錢包，統整電子支付、數位貨幣等服務。
    2. 將個人財產列表和不動產、汽車交易整合到該機制。

## 預計時間表

- 階段一
- 階段二
- 階段三

## 參考資料

1. 拜占庭問題
2. 比特幣白皮書
3. 暗網
4. 以太坊
5. 狗狗幣
6. 波場幣
7. 圖靈鏈
8. Linux Foundation
9. Hyperledger-fabric
10. 權威證明
11. Fabric SDK
12. SHA256
- Using blockchain for enabling internet voting
- BLOCKCHAIN FOR THE HUMANITARIAN SECTOR: FUTURE OPPORTUNITIES
- Medical Record System Using Blockchain, Big Data and Tokenization
- [背書策略](https://blog.csdn.net/greedystar/article/details/80593761)
- [交易](https://zhuanlan.zhihu.com/p/96818424)